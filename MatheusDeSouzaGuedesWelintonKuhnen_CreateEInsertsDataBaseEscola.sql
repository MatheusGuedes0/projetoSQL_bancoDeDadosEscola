CREATE DATABASE ESCOLA;
USE ESCOLA;

CREATE TABLE PROFESSOR
(
CPF NUMERIC(11) CONSTRAINT PK_PROFESSOR PRIMARY KEY,
NOME VARCHAR(50) CONSTRAINT NN_NOME_PROFESSOR NOT NULL,
DATA_NASCIMENTO DATE CONSTRAINT NN_DT_NASC_PROFESSOR NOT NULL,
TELEFONE NUMERIC(11) CONSTRAINT NN_TELEFONE_PROFESSOR NOT NULL,
SALARIO MONEY CONSTRAINT NN_SALARIO_PROFESSOR NOT NULL
);

CREATE TABLE DISCIPLINA
(
ID_DISCIPLINA INT CONSTRAINT PK_DISCPLINA PRIMARY KEY IDENTITY(1,1),
NOME VARCHAR(20) CONSTRAINT NN_NOME_DISCPLINA NOT NULL,
CARGA_HORARIA INT CONSTRAINT NN_HORAS NOT NULL,
EMENTA VARCHAR(200) CONSTRAINT NN_EMENTA NOT NULL,
CONTEUDO VARCHAR(80) CONSTRAINT NN_CONTEUDO NOT NULL,
ANO VARCHAR(10) CONSTRAINT NN_ANO_DISCIPLINA NOT NULL,
CPF_PROFESSOR NUMERIC(11) CONSTRAINT FK_CPF_PROFESSOR FOREIGN KEY REFERENCES PROFESSOR(CPF)
);

CREATE TABLE COORDENACAO
(
CPF NUMERIC(11) CONSTRAINT PK_COORDENACAO PRIMARY KEY,
NOME VARCHAR(20) CONSTRAINT NN_NOME_COORDENACAO NOT NULL,
DATA_NASCIMENTO DATE CONSTRAINT NN_DT_NASC_COORDENACAO NOT NULL,
TELEFONE NUMERIC(11) CONSTRAINT NN_TELEFONE_COORDENACAO NOT NULL,
SALARIO MONEY CONSTRAINT NN_SALARIO_COORDENACAO NOT NULL
);

CREATE TABLE TURMA
(
ID_TURMA INT CONSTRAINT PK_TURMA PRIMARY KEY IDENTITY(1,1),
NUM_ALUNOS INT CONSTRAINT NN_ALUNOS NOT NULL,
ANO VARCHAR(10) CONSTRAINT NN_ANO_TURMA NOT NULL,
CPF_COORDENACAO NUMERIC(11) CONSTRAINT FK_CPF_COORDERNACAO FOREIGN KEY REFERENCES COORDENACAO(CPF)
);

CREATE TABLE ESTADO
(
COD_ESTADO INT CONSTRAINT PK_ESTADO PRIMARY KEY IDENTITY(1,1),
SIGLA CHAR(2) CONSTRAINT NN_SIGLA NOT NULL
);

CREATE TABLE CIDADE
(
COD_CIDADE INT CONSTRAINT PK_CIDADE PRIMARY KEY IDENTITY(1,1),
NOME VARCHAR(50) CONSTRAINT NN_NOME_CIDADE NOT NULL,
COD_ESTADO INT CONSTRAINT FK_COD_ESTADO FOREIGN KEY REFERENCES ESTADO(COD_ESTADO)
);

CREATE TABLE RESPONSAVEL
(
CPF NUMERIC(11) CONSTRAINT PK_RESPONSAVEL PRIMARY KEY,
NOME VARCHAR(50) CONSTRAINT NN_NOME_RESPONSAVEL NOT NULL,
RG VARCHAR(11) CONSTRAINT UN_RG_RESPONSAVEL UNIQUE CONSTRAINT NN_RG_RESPONSAVEL NOT NULL,
TELEFONE NUMERIC(11) CONSTRAINT NN_TELEFONE_RESPONSAVEL NOT NULL,
COD_CIDADE INT CONSTRAINT FK_COD_CIDADE_RESPONSAVEL FOREIGN KEY REFERENCES CIDADE(COD_CIDADE),
DATA_NASCIMENTO DATE CONSTRAINT NN_DT_NASC_RESPONSAVEL NOT NULL,
RUA VARCHAR(30) CONSTRAINT NN_RUA_RESPONSAVEL NOT NULL,
NUMERO INT CONSTRAINT NN_NUMERO_RESPONSAVEL NOT NULL,
BAIRRO VARCHAR(30) CONSTRAINT NN_BAIRRO_RESPONSAVEL NOT NULL
);

CREATE TABLE ALUNO
(
NUM_MATRICULA INT CONSTRAINT PK_ALUNO PRIMARY KEY IDENTITY(1,1),
NOME VARCHAR(50) CONSTRAINT NN_NOME_ALUNO NOT NULL,
RG VARCHAR(11) CONSTRAINT UN_RG_ALUNO UNIQUE CONSTRAINT NN_RG_ALUNO NOT NULL,
CPF NUMERIC(11) CONSTRAINT UN_CPF_ALUNO UNIQUE CONSTRAINT NN_RG_ALUNO NOT NULL,
COD_CIDADE INT CONSTRAINT FK_COD_CIDADE_ALUNO FOREIGN KEY REFERENCES CIDADE(COD_CIDADE),
DATA_NASCIMENTO DATE CONSTRAINT NN_DT_NASC_ALUNO NOT NULL,
RUA VARCHAR(30) CONSTRAINT NN_RUA_ALUNO NOT NULL,
NUMERO INT CONSTRAINT NN_NUMERO_ALUNO NOT NULL,
BAIRRO VARCHAR(30) CONSTRAINT NN_BAIRRO_ALUNO NOT NULL,
SEXO CHAR(1) CONSTRAINT CK_SEXO CHECK(SEXO IN('M', 'F')) CONSTRAINT NN_SEXO NOT NULL,
FILIACAO_1 VARCHAR(50),
FILIACAO_2 VARCHAR(50),
CPF_RESPONSAVEL NUMERIC(11) CONSTRAINT FK_CPF_RESONSAVEL_ALUNO FOREIGN KEY REFERENCES RESPONSAVEL(CPF)
);

CREATE TABLE ALUNO_TURMA_DISCIPLINA
(
ID_ALUNO_TURMA_DISCIPLINA INT CONSTRAINT PK_ID_ALUNO_TURMA_DISCIPLINA PRIMARY KEY IDENTITY(1,1),
DATA_MATRICULA DATE CONSTRAINT NN_DATA_MATRICULA NOT NULL,
NOTA_1 FLOAT,
NOTA_2 FLOAT,
NOTA_3 FLOAT,
NOTA_4 FLOAT,
ID_TURMA INT CONSTRAINT FK_TURMA_ALUNO_TURMA_DISCIPLINA FOREIGN KEY REFERENCES TURMA(ID_TURMA),
ID_DISCIPLINA INT CONSTRAINT FK_DISCIPLINA_ALUNO_TURMA_DISCIPLINA FOREIGN KEY REFERENCES DISCIPLINA(ID_DISCIPLINA),
NUM_MATRICULA INT CONSTRAINT FK_NUM_MATRICULA_ALUNO_TURMA_DISCIPLINA FOREIGN KEY REFERENCES ALUNO(NUM_MATRICULA)
);

CREATE TABLE FREQUENCIA
(
DATA_CHAMADA DATE,
NUM_MATRICULA INT,
NUMERO_FALTAS INT CONSTRAINT NN_NUMERO_FALTAS NOT NULL,
ID_ALUNO_TURMA_DISCIPLINA INT CONSTRAINT FK_FREQUENCIA_ID_ALUNO_TURMA_DISCIPLINA FOREIGN KEY REFERENCES ALUNO_TURMA_DISCIPLINA(ID_ALUNO_TURMA_DISCIPLINA),
CONSTRAINT PK_FREQUENCIA PRIMARY KEY(DATA_CHAMADA, NUM_MATRICULA),
CONSTRAINT FK_FREQUENCIA_NUM_MATRICULA FOREIGN KEY(NUM_MATRICULA) REFERENCES ALUNO(NUM_MATRICULA)
);


INSERT INTO ESTADO(SIGLA)
VALUES ('SC')
INSERT INTO ESTADO(SIGLA)
VALUES ('RS')
INSERT INTO ESTADO(SIGLA)
VALUES ('SP')
INSERT INTO ESTADO(SIGLA)
VALUES ('PR')

INSERT INTO CIDADE(NOME, COD_ESTADO)
VALUES('PATO BRANCO', 4)
INSERT INTO CIDADE(NOME, COD_ESTADO)
VALUES('SAO LOURENCO DO OESTE', 1)
INSERT INTO CIDADE(NOME, COD_ESTADO)
VALUES('PORTO ALEGRE', 2)
INSERT INTO CIDADE(NOME, COD_ESTADO)
VALUES('SAO PAULO', 3)

INSERT INTO RESPONSAVEL(CPF, NOME, RG, TELEFONE, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO)
VALUES(11122233344, 'WELINTON', '33222233344', 49998016875, 2, '2001-10-25', 'RUI BARBOSA' , 1, 'CENTRO')
INSERT INTO RESPONSAVEL(CPF, NOME, RG, TELEFONE, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO)
VALUES(55522233311, 'MATHEUS', '44552223331', 49990011229, 1, '2000-12-10', 'SAO JOAO' , 2, 'CENTRO')
INSERT INTO RESPONSAVEL(CPF, NOME, RG, TELEFONE, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO)
VALUES(99922233333, 'GABRIELA', '88822233333', 49998016875, 2, '1998-08-15', 'MARIA GORETTI' , 3, 'PERPETUO SOCORRO')
INSERT INTO RESPONSAVEL(CPF, NOME, RG, TELEFONE, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO)
VALUES(77722233322, 'FERNANDA', '66622233322', 49998016875, 3, '1995-05-08', 'RUI BARBOSA' , 4, 'CENTRO')

INSERT INTO ALUNO(NOME, RG, CPF, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO, SEXO, FILIACAO_1, FILIACAO_2, CPF_RESPONSAVEL)
VALUES('ANA', '55522233355', 12322233330, 1, '2015-10-18', 'RUI BARBOSA', 1, 'CENTRO', 'F', 'WELINTON', 'RAFAELA', 11122233344)
INSERT INTO ALUNO(NOME, RG, CPF, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO, SEXO, FILIACAO_1, FILIACAO_2, CPF_RESPONSAVEL)
VALUES('LUCAS', '13322233344', 14422233340, 1, '2015-08-17', 'RUI BARBOSA', 4, 'CENTRO', 'M', NULL, NULL, 77722233322)
INSERT INTO ALUNO(NOME, RG, CPF, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO, SEXO, FILIACAO_1, FILIACAO_2, CPF_RESPONSAVEL)
VALUES('JONATHAN', '13222233329', 14422233382, 1, '2015-07-19', 'SAO JOAO', 2, 'CENTRO', 'M', 'LUCAS', 'THAIS', 55522233311)
INSERT INTO ALUNO(NOME, RG, CPF, COD_CIDADE, DATA_NASCIMENTO, RUA, NUMERO, BAIRRO, SEXO, FILIACAO_1, FILIACAO_2, CPF_RESPONSAVEL)
VALUES('FELIPE', '14522233377', 14422233346, 1, '2014-05-13', 'MARIA GORETTI', 3, 'PERPETUO SOCORRO', 'M', 'RAFAEL', 'FERNANDA', 99922233333)

INSERT INTO PROFESSOR(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(41373292652, 'RENATA', '1990-11-30', 43996612843, 3000.50)
INSERT INTO PROFESSOR(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(54540173537, 'SUELI', '1995-08-27', 82998325658, 2850.50)
INSERT INTO PROFESSOR(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(70009913998, 'ANDRE', '1980-02-14', 62988197228, 4564.50)
INSERT INTO PROFESSOR(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(61265121621, 'MARCOS', '1988-01-30', 71982463666, 3857.50)

INSERT INTO COORDENACAO(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(78504666590, 'ANTONIO', '1993-03-19', 61981902671, 3277.90)
INSERT INTO COORDENACAO(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(22593442409, 'LUZIA', '1991-05-13', 84999211090, 4120.30)
INSERT INTO COORDENACAO(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(43270803222, 'MALU', '1995-06-19', 63983870562, 3000.00)
INSERT INTO COORDENACAO(CPF, NOME, DATA_NASCIMENTO, TELEFONE, SALARIO)
VALUES(60855188200, 'MIRELLA', '1989-02-26', 85989657844, 3277.90)


INSERT INTO DISCIPLINA(NOME, CARGA_HORARIA, EMENTA, CONTEUDO, ANO, CPF_PROFESSOR)
VALUES('GEOGRAFIA', 80, 'ESTUDO DOS FENOMENOS NATURAIS E SOCIAIS HISTORICAMENTE E SOCIALMENTE CONSTITUIDOS', 'BRINCADEIRAS;PAISAGEM;ATIVIDADES HUMANAS', '1 ANO A', 41373292652)
INSERT INTO DISCIPLINA(NOME, CARGA_HORARIA, EMENTA, CONTEUDO, ANO, CPF_PROFESSOR)
VALUES('HISTORIA', 90, 'ESTUDO DO PASSADO, DA MEMÓRIA E DOS OBJETOS DAS COMUNIDADADES', 'OBJETOS COLETIVOS; HISTORIA HOS ESPAÇOS, HISTORIA DOS OBJETOS', '1 ANO A', 54540173537)
INSERT INTO DISCIPLINA(NOME, CARGA_HORARIA, EMENTA, CONTEUDO, ANO, CPF_PROFESSOR)
VALUES('MATEMATICA', 120, 'ESTUDO DOS NUMEROS E DAS OPERAÇÕEOS BÁSICAS DA MATEMATICA', 'SOMA;SUBTRAÇÃO;MULTIPLICAÇÃO;DIVISÃO', '2 ANO A', 70009913998)
INSERT INTO DISCIPLINA(NOME, CARGA_HORARIA, EMENTA, CONTEUDO, ANO, CPF_PROFESSOR)
VALUES('MATEMATICA', 120, 'ESTUDO DOS NUMEROS E DAS OPERAÇÕEOS BÁSICAS DA MATEMATICA', 'SOMA;SUBTRAÇÃO;MULTIPLICAÇÃO;DIVISÃO', '2 ANO B', 61265121621)

INSERT INTO TURMA(NUM_ALUNOS, ANO, CPF_COORDENACAO)
VALUES('20', '1 ANO A', 78504666590)
INSERT INTO TURMA(NUM_ALUNOS, ANO, CPF_COORDENACAO)
VALUES('15', '1 ANO B', 22593442409)
INSERT INTO TURMA(NUM_ALUNOS, ANO, CPF_COORDENACAO)
VALUES('17', '2 ANO A', 43270803222)
INSERT INTO TURMA(NUM_ALUNOS, ANO, CPF_COORDENACAO)
VALUES('18', '2 ANO B', 60855188200)

INSERT INTO ALUNO_TURMA_DISCIPLINA(DATA_MATRICULA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, ID_TURMA, ID_DISCIPLINA, NUM_MATRICULA)
VALUES('2023-01-25', 10, NULL, NULL, NULL, 1, 1, 1)
INSERT INTO ALUNO_TURMA_DISCIPLINA(DATA_MATRICULA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, ID_TURMA, ID_DISCIPLINA, NUM_MATRICULA)
VALUES('2023-01-15', 9.5, 8, NULL, NULL, 2, 2, 2)
INSERT INTO ALUNO_TURMA_DISCIPLINA(DATA_MATRICULA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, ID_TURMA, ID_DISCIPLINA, NUM_MATRICULA)
VALUES('2023-01-18', 6, 4, 10, 6.5, 3, 3, 3)
INSERT INTO ALUNO_TURMA_DISCIPLINA(DATA_MATRICULA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, ID_TURMA, ID_DISCIPLINA, NUM_MATRICULA)
VALUES('2023-01-07', 10, 8.5, 9.5, NULL, 4, 4, 4)

INSERT INTO FREQUENCIA(DATA_CHAMADA, NUM_MATRICULA, NUMERO_FALTAS, ID_ALUNO_TURMA_DISCIPLINA)
VALUES('2023-03-23', 1, 0, 1)
INSERT INTO FREQUENCIA(DATA_CHAMADA, NUM_MATRICULA, NUMERO_FALTAS, ID_ALUNO_TURMA_DISCIPLINA)
VALUES('2023-07-27', 2, 8, 2)
INSERT INTO FREQUENCIA(DATA_CHAMADA, NUM_MATRICULA, NUMERO_FALTAS, ID_ALUNO_TURMA_DISCIPLINA)
VALUES('2023-12-18', 3, 24, 3)
INSERT INTO FREQUENCIA(DATA_CHAMADA, NUM_MATRICULA, NUMERO_FALTAS, ID_ALUNO_TURMA_DISCIPLINA)
VALUES('2023-10-10', 4, 10, 4)
